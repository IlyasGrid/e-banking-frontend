<mat-card *ngIf="account">
    <mat-card-header>
      <mat-card-title>Account {{ account.id }}</mat-card-title>
      <mat-card-subtitle>{{ account.type }} Account</mat-card-subtitle>
    </mat-card-header>
  
    <mat-card-content>
      <mat-tab-group [(selectedIndex)]="activeTab">
        <mat-tab label="Overview">
          <div class="details-grid">
            <div><strong>Account ID:</strong> {{ account.id }}</div>
            <div><strong>Type:</strong> {{ account.type }}</div>
            <div><strong>Balance:</strong> {{ account.balance | currency }}</div>
            <div><strong>Created:</strong> {{ account.createdAt | date }}</div>
          </div>
  
          <div class="account-actions">
            <button mat-raised-button color="primary" (click)="performOperation('credit')">
              Credit
            </button>
            <button mat-raised-button color="warn" (click)="performOperation('debit')">
              Debit
            </button>
            <button mat-raised-button (click)="performOperation('transfer')">
              Transfer
            </button>
          </div>
        </mat-tab>
  
        <mat-tab label="All Operations">
          <div class="loading-spinner" *ngIf="isLoading">
            <mat-spinner diameter="50"></mat-spinner>
          </div>
  
          <table mat-table [dataSource]="operations" *ngIf="!isLoading">
            <ng-container matColumnDef="date">
              <th mat-header-cell *matHeaderCellDef>Date</th>
              <td mat-cell *matCellDef="let op">{{ op.operationDate | date:'medium' }}</td>
            </ng-container>
  
            <ng-container matColumnDef="type">
              <th mat-header-cell *matHeaderCellDef>Type</th>
              <td mat-cell *matCellDef="let op">
                <span [class.credit]="op.type === 'CREDIT'" [class.debit]="op.type === 'DEBIT'">
                  {{ op.type }}
                </span>
              </td>
            </ng-container>
  
            <ng-container matColumnDef="amount">
              <th mat-header-cell *matHeaderCellDef>Amount</th>
              <td mat-cell *matCellDef="let op">{{ op.amount | currency }}</td>
            </ng-container>
  
            <ng-container matColumnDef="description">
              <th mat-header-cell *matHeaderCellDef>Description</th>
              <td mat-cell *matCellDef="let op">{{ op.description }}</td>
            </ng-container>
  
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          </table>
  
          <div *ngIf="operations.length === 0 && !isLoading" class="no-results">
            No operations found for this account
          </div>
        </mat-tab>
  
        <mat-tab label="Paged History">
          <div class="loading-spinner" *ngIf="isLoading">
            <mat-spinner diameter="50"></mat-spinner>
          </div>
  
          <div *ngIf="accountHistory && !isLoading">
            <div class="balance-info">
              Current Balance: {{ accountHistory.balance | currency }}
            </div>
  
            <table mat-table [dataSource]="accountHistory.accountOperations">
              <ng-container matColumnDef="date">
                <th mat-header-cell *matHeaderCellDef>Date</th>
                <td mat-cell *matCellDef="let op">{{ op.operationDate | date:'medium' }}</td>
              </ng-container>
  
              <ng-container matColumnDef="type">
                <th mat-header-cell *matHeaderCellDef>Type</th>
                <td mat-cell *matCellDef="let op">
                  <span [class.credit]="op.type === 'CREDIT'" [class.debit]="op.type === 'DEBIT'">
                    {{ op.type }}
                  </span>
                </td>
              </ng-container>
  
              <ng-container matColumnDef="amount">
                <th mat-header-cell *matHeaderCellDef>Amount</th>
                <td mat-cell *matCellDef="let op">{{ op.amount | currency }}</td>
              </ng-container>
  
              <ng-container matColumnDef="description">
                <th mat-header-cell *matHeaderCellDef>Description</th>
                <td mat-cell *matCellDef="let op">{{ op.description }}</td>
              </ng-container>
  
              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
  
            <mat-paginator [length]="accountHistory.totalPages * accountHistory.pageSize"
                           [pageSize]="accountHistory.pageSize"
                           [pageIndex]="accountHistory.currentPage"
                           [pageSizeOptions]="[5, 10, 25]"
                           (page)="onPageChange($event)">
            </mat-paginator>
          </div>
        </mat-tab>
      </mat-tab-group>
    </mat-card-content>
  </mat-card>